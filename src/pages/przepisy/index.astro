---
import BaseLayout from '../../layouts/BaseLayout.astro';
import Navbar from '../../components/Navbar.astro';
import SearchModal from '../../components/SearchModal.astro';
import Footer from '../../components/Footer.astro';
import SEO from '../../components/SEO.astro';
import RecipeCard from '../../components/RecipeCard.astro';
import Breadcrumbs from '../../components/Breadcrumbs.astro';
import Alert from '../../components/Alert.astro';
import RecipeGrid from '../../components/RecipeGrid.astro';
import { getAllRecipes } from '../../utils/recipeHelpers';
import { pluralize } from '../../utils/pluralize';

const allRecipes = await getAllRecipes();

const description = `Przeglądaj wszystkie ${allRecipes.length} przepisy kulinarne w naszej kolekcji. Znajdź idealne przepisy na każdą okazję.`;
const keywords = ['wszystkie przepisy', 'kuchnia', 'gotowanie', ...allRecipes.slice(0, 10).flatMap(r => r.data.categories)];
---

<BaseLayout title="Wszystkie przepisy">
  <SEO
    slot="seo"
    title="Wszystkie przepisy"
    description={description}
    keywords={keywords}
    type="website"
  />
  <Navbar />
  <SearchModal />
  <main class="flex-1 container mx-auto px-4 py-8 max-w-7xl">
  <Breadcrumbs items={[
    { label: 'Strona główna', href: '/' },
    { label: 'Wszystkie przepisy' }
  ]} />

  <div class="mb-10">
    <h1 class="text-5xl font-bold mb-2 text-secondary">Wszystkie przepisy</h1>
    <p class="text-lg text-base-content/60">
      {allRecipes.length} {pluralize(allRecipes.length, 'recipe')}
    </p>
  </div>

  <div class="divider"></div>

  {allRecipes.length === 0 ? (
    <Alert message="Brak dostępnych przepisów." />
  ) : (
    <RecipeGrid>
      {allRecipes.map((recipe) => (
        <RecipeCard recipe={recipe} />
      ))}
    </RecipeGrid>
  )}
  </main>
  <Footer />
</BaseLayout>
